
/**
 * æ”¯ä»˜æˆåŠŸé¡µé¢å‚æ•°
 */
export interface PaySuccessPageParams {
  orderNumber: string; // âœ¨ æ”¹ä¸º stringï¼Œé˜²æ­¢ç²¾åº¦ä¸¢å¤±ï¼Œä¸”è¯­ä¹‰æ›´å‡†ç¡®
  amount: number;
}

@Component
export struct PaySuccessPage {
  @Consume('pageStack') pageStack: NavPathStack;
  @State orderNumber: string = ''; // âœ¨
  @State amount: number = 0;

  build() {
    NavDestination() {
      Column() {
        // é¡¶éƒ¨ç©ºç™½
        Blank().height(80)

        // æˆåŠŸå›¾æ ‡
        Column() {
          SymbolGlyph($r('sys.symbol.checkmark_circle_fill'))
            .fontSize(100)
            .fontColor([Color.Green])
          
          Text('æ”¯ä»˜æˆåŠŸ')
            .fontSize(24)
            .fontWeight(FontWeight.Bold)
            .margin({ top: 20 })
          
          Text('ç¾Žé£Ÿæ­£åœ¨å…¨é€Ÿå¥”å‘æ‚¨å–µï¼ðŸš€')
            .fontSize(14)
            .fontColor('#666')
            .margin({ top: 10 })
        }
        .width('100%')
        .alignItems(HorizontalAlign.Center)

        // è¯¦æƒ…å¡ç‰‡
        Column() {
          Row() {
            Text('å®žä»˜é‡‘é¢').fontSize(14).fontColor('#999')
            Blank()
            Text(`Â¥${this.amount.toFixed(2)}`).fontSize(16).fontWeight(FontWeight.Bold)
          }
          .width('100%')
          .padding({ top: 15, bottom: 15 })

          Divider().color('#F5F5F5')

          Row() {
            Text('è®¢å•ç¼–å·').fontSize(14).fontColor('#999')
            Blank()
            Text(this.orderNumber).fontSize(14).fontColor('#333') // ç›´æŽ¥æ˜¾ç¤ºå­—ç¬¦ä¸²
          }
          .width('100%')
          .padding({ top: 15, bottom: 15 })
        }
        .margin({ top: 50, left: 20, right: 20 })
        .padding(20)
        .backgroundColor(Color.White)
        .borderRadius(12)

        Blank()

        // æŒ‰é’®ç»„
        Column({ space: 15 }) {
          Button('è¿”å›žé¦–é¡µ')
            .width('90%')
            .height(45)
            .type(ButtonType.Capsule)
            .backgroundColor('#FFCC00')
            .fontColor('#333')
            .onClick(() => {
              this.pageStack.clear();
              this.pageStack.pushPath({ name: 'MainTabs' });
            })

          Button('æŸ¥çœ‹è®¢å•')
            .width('90%')
            .height(45)
            .type(ButtonType.Capsule)
            .backgroundColor(Color.Transparent)
            .fontColor('#666')
            .border({ width: 1, color: '#DDD' })
            .onClick(() => {
              // TODO: è·³è½¬åˆ°è®¢å•è¯¦æƒ…æˆ–è®¢å•åˆ—è¡¨å–µ
              this.pageStack.clear();
              this.pageStack.pushPath({ name: 'MainTabs' });
            })
        }
        .margin({ bottom: 50 })
      }
      .width('100%')
      .height('100%')
      .backgroundColor('#F9F9F9')
    }
    .hideTitleBar(true)
    .onReady((context: NavDestinationContext) => {
      this.pageStack = context.pathStack;
      const params = context.pathInfo.param as PaySuccessPageParams;
      if (params) {
        this.orderNumber = params.orderNumber; // ç›´æŽ¥èµ‹å€¼
        this.amount = params.amount;
      }
    })
  }
}
